<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <title>Laravel 学习记录</title><meta name="description" content="Laravel学习点滴"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.21">
    <link rel="preload" href="/laravel-study/assets/js/runtime~app.b0a8d08d.js" as="script"><link rel="preload" href="/laravel-study/assets/css/styles.95f2d38e.css" as="style"><link rel="preload" href="/laravel-study/assets/js/4640.5ce5ce4c.js" as="script"><link rel="preload" href="/laravel-study/assets/js/app.88081bb1.js" as="script">
    <link rel="stylesheet" href="/laravel-study/assets/css/styles.95f2d38e.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/laravel-study/" class=""><img class="logo" src="/laravel-study/images/laravel-logo.min.svg" alt="Laravel 学习记录"><span class="site-name can-hide">Laravel 学习记录</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/laravel-study/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="集合"><span class="title">集合</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="集合"><span class="title">集合</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/laravel-study/collections/" class="nav-link" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/laravel-study/collections/demo/" class="nav-link" aria-label="实际应用"><!--[--><!--]--> 实际应用 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="模型"><span class="title">模型</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="模型"><span class="title">模型</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/laravel-study/model/" class="nav-link" aria-label="Laravel模型"><!--[--><!--]--> Laravel模型 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/laravel-study/model/related-relationships/" class="nav-link" aria-label="模型关联关系"><!--[--><!--]--> 模型关联关系 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="其它"><span class="title">其它</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="其它"><span class="title">其它</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/laravel-study/tests/" class="nav-link" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/laravel-study/others/" class="nav-link router-link-active" aria-label="其它"><!--[--><!--]--> 其它 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/laravel-study/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="集合"><span class="title">集合</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="集合"><span class="title">集合</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/laravel-study/collections/" class="nav-link" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/laravel-study/collections/demo/" class="nav-link" aria-label="实际应用"><!--[--><!--]--> 实际应用 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="模型"><span class="title">模型</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="模型"><span class="title">模型</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/laravel-study/model/" class="nav-link" aria-label="Laravel模型"><!--[--><!--]--> Laravel模型 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/laravel-study/model/related-relationships/" class="nav-link" aria-label="模型关联关系"><!--[--><!--]--> 模型关联关系 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="其它"><span class="title">其它</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="其它"><span class="title">其它</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/laravel-study/tests/" class="nav-link" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/laravel-study/others/" class="nav-link router-link-active" aria-label="其它"><!--[--><!--]--> 其它 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><p>Laravel 5.4 GitHub托管数据 Packagist托管Composer包</p><p>首先，使用composer获取到Laravel项目，并做好相关配置。</p><blockquote><p>注意： 在下例中使用到 php 相关命令行执行操作的时候，如无特殊说明都是在项目的根目录下操作。</p></blockquote><h2 id="创建目录" tabindex="-1"><a class="header-anchor" href="#创建目录" aria-hidden="true">#</a> 创建目录</h2><ul><li>创建<code>packages</code>目录存放本地的开发包，</li><li>在<code>packages</code>目录下，创建相应的<code>vendor</code>目录，如<code>github</code>的用户名等，如这里我使用的<code>curder</code></li><li>在<code>curder</code>目录下创建软件包名称，<code>laravel-admin</code></li></ul><p>具体的目录结构如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>app/
artisan/
...
database/
package.json
packages
└── curder
    └── laravel-admin
        └── src
phpunit.xml
public/
...
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="修改-composer-json-文件" tabindex="-1"><a class="header-anchor" href="#修改-composer-json-文件" aria-hidden="true">#</a> 修改 <code>composer.json</code> 文件</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&quot;autoload&quot;: {
    &quot;classmap&quot;: [
        &quot;database/seeds&quot;,
        &quot;database/factories&quot;
    ],
    &quot;psr-4&quot;: {
        &quot;App\\&quot;: &quot;app/&quot;
    }
},
&quot;autoload-dev&quot;: {
    &quot;psr-4&quot;: {
        &quot;Tests\\&quot;: &quot;tests/&quot;,
        &quot;Curder\\Admin\\&quot;: &quot;packages/curder/laravel-admin/src/&quot;
    }
},
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>注意看上述配置中 <code>Curder\\Admin\\</code>（命名空间）的值，配置值指向目录真实路径。</p></blockquote><h2 id="生成provider并注册" tabindex="-1"><a class="header-anchor" href="#生成provider并注册" aria-hidden="true">#</a> 生成<code>Provider</code>并注册</h2><h3 id="创建一个测试文件-admin-php" tabindex="-1"><a class="header-anchor" href="#创建一个测试文件-admin-php" aria-hidden="true">#</a> 创建一个测试文件 Admin.php</h3><p>文件内容如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;?php
namespace Curder\Admin;

class Admin {
    public function sayHello() {
        return &#39;Hello&#39;;
    }
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="生成provider文件并挪到相应位置" tabindex="-1"><a class="header-anchor" href="#生成provider文件并挪到相应位置" aria-hidden="true">#</a> 生成<code>Provider</code>文件并挪到相应位置</h3><p>使用命令生成一个<code>Provider</code>，如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>php artisan make:provider AdminProvider
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>执行完这个命令将生成 <code>AdminProvider.php</code> 文件在 <code>app/providers/</code>目录下，我们需要将其复制到我的本地packages目录的相应位置，在 <code>packages/curder/laravel-admin/src/</code>下， 此时我们可以看到目录下有如下变化：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>app/
artisan/
...
database/
package.json
packages
└── curder
    └── laravel-admin
        └── src
            └── Admin.php
            └── AdminProvider.php
phpunit.xml
public/
...
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="修改provider文件并注册到laravel的ioc容器中" tabindex="-1"><a class="header-anchor" href="#修改provider文件并注册到laravel的ioc容器中" aria-hidden="true">#</a> 修改Provider文件并注册到Laravel的IOC容器中</h3><p>打开 <code>packages/curder/laravel-admin/src/AdminProvider.php</code>文件，修改<code>命名空间</code>和<code>register()</code>方法里的相关内容，如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;?php
namespace Curder\Admin;

use Illuminate\Support\ServiceProvider;

class AdminProvider extends ServiceProvider
{
    /**
     * Bootstrap the application services.
     *
     * @return void
     */
    public function boot()
    {
        //
    }

    /**
     * Register the application services.
     *
     * @return void
     */
    public function register()
    {
        $this-&gt;app-&gt;singleton(&#39;admin&#39;,function(){
            return new Admin;
        });
    }
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>然后，修改 <code>config/app.php</code>中的 <code>providers</code>数组的值中添加上面的 Provider，如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/*
 * Package Service Providers...
 */
Laravel\Tinker\TinkerServiceProvider::class,
Curder\Admin\AdminProvider::class,

...
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="测试" tabindex="-1"><a class="header-anchor" href="#测试" aria-hidden="true">#</a> 测试</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>☁  rbac [master] ⚡ php artisan tinker 
Psy Shell v0.8.11 (PHP 7.1.8 — cli) by Justin Hileman
&gt;&gt;&gt; app(&#39;admin&#39;)-&gt;sayHello();
=&gt; &quot;Hello&quot;
&gt;&gt;&gt;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>至此，Laravel 就引入本地的插件完毕了，接下来我们将代码放到<a href="https://github.com" target="_blank" rel="noopener noreferrer">GitHub<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>上托管，然后在<a href="https://packagist.org/" target="_blank" rel="noopener noreferrer">Packagist<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>拉取代码。</p><h2 id="将package放到github仓库" tabindex="-1"><a class="header-anchor" href="#将package放到github仓库" aria-hidden="true">#</a> 将package放到github仓库</h2><h3 id="到github登录自己的账号和密码-创建一个新的仓库并上传源代码" tabindex="-1"><a class="header-anchor" href="#到github登录自己的账号和密码-创建一个新的仓库并上传源代码" aria-hidden="true">#</a> 到github登录自己的账号和密码，创建一个新的仓库并上传源代码</h3><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fq0ikshdfdj30kt0ifac2.jpg" alt=""></p><p>获取到 Remote Addr 后，再回到本地开发目录 <code>packages/curder/laravel-admin</code>执行如下命令：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>git init
git remote add origin git@github.com:curder/caravel-admin.git
git push -u origin master
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>至此代码已经部署到GitHub站点。</p><p>登录到GItHub应该就能看到如下图所示的内容：</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fq0iktwklij30t20jrtbn.jpg" alt=""></p><h2 id="配置github提交时自动通知packagist" tabindex="-1"><a class="header-anchor" href="#配置github提交时自动通知packagist" aria-hidden="true">#</a> 配置github提交时自动通知Packagist</h2><p>在项目列表下：即 https://github.com/curder/caravel-admin 下点击 &quot;Settings&quot; -&gt; &quot;Integrations &amp; services&quot; -&gt; &quot;Add Service&quot;下拉菜单中选择 &quot;Packagist&quot;，如下图</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fq0ikv95o3j30so0e140u.jpg" alt=""></p><p>点击进去后，会需要我们提供 &#39;User&#39; 和 ‘Token’ 信息我们需要登录<a href="https://packagist.org/profile/" target="_blank" rel="noopener noreferrer">Packagist<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>获取。</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fq0ikwl5h0j30wq05xt9h.jpg" alt=""></p><p>将上面获取的两个关键信息填入GitHub的表单中，如下：</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fq0ikxlxqzj30ky0mojtb.jpg" alt=""></p><h2 id="提交package到packagist" tabindex="-1"><a class="header-anchor" href="#提交package到packagist" aria-hidden="true">#</a> 提交package到Packagist</h2><p>登录packagist后，点击<a href="https://packagist.org/packages/submit" target="_blank" rel="noopener noreferrer">submit<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>输入：<code>https://github.com/curder/caravel-admin</code>，如下： <img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fq0il0115sj30xd09ewgx.jpg" alt=""></p><p>成功后会看到如下的界面：</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fq0il0sosrj30xd0j1jto.jpg" alt=""></p><p>至此，同步完成。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">3/23/2021, 9:22:20 AM</span></div><!----></footer><!----><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/laravel-study/assets/js/runtime~app.b0a8d08d.js" defer></script><script src="/laravel-study/assets/js/4640.5ce5ce4c.js" defer></script><script src="/laravel-study/assets/js/app.88081bb1.js" defer></script>
  </body>
</html>
