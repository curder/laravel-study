# DB æ¨¡åž‹å’Œ Eloquent


## orderByRaw åŽŸå§‹æŸ¥è¯¢æŽ’åº

å¯ä»¥ä¼ é€’åŽŸå§‹æŸ¥è¯¢æ¥å¯¹ç»“æžœè¿›è¡ŒæŽ’åºã€‚ ä¾‹å¦‚ï¼ŒæŒ‰ç…§ä»»åŠ¡åœ¨æˆªæ­¢æ—¥æœŸä¹‹å‰å®Œæˆçš„æ—¶é—´å¯¹ä»»åŠ¡è¿›è¡ŒæŽ’åºã€‚

```php {4}
// æŒ‰ä»»åŠ¡åœ¨æˆªæ­¢æ—¥æœŸä¹‹å‰å®Œæˆå¯¹ä»»åŠ¡è¿›è¡ŒæŽ’åº
Task::query()
    ->whereNotNull('completed_at')
    ->orderByRaw('due_at - completed_at DESC')
    ->get();
```

## ð˜„ð—µð—²ð—¿ð—²ð—•ð—²ð˜ð˜„ð—²ð—²ð—» èŽ·å–ä¸¤ä¸ªæ—¶é—´ä¹‹é—´çš„æ•°æ®

ä½¿ç”¨ `ð˜„ð—µð—²ð—¿ð—²ð—•ð—²ð˜ð˜„ð—²ð—²ð—»` åŠ è½½ä¸¤ä¸ªæ—¶é—´æˆ³ä¹‹é—´çš„è®°å½•ã€‚

```php
// åŠ è½½ä¸¤ä¸ªæ—¶é—´æˆ³ä¹‹é—´å®Œæˆçš„ä»»åŠ¡
Task::whereBetween('completed_at', [
    $request->from ?? '2023-01-01',
    $request->to ??  today()->toDateTimeString(),
]);
```
