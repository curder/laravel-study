import{_ as c,C as p,o as r,c as y,H as o,w as n,Q as t,k as s,a as l}from"./chunks/framework.5499cfac.js";const k=JSON.parse('{"title":"Testing 测试","description":"","frontmatter":{},"headers":[],"relativePath":"partials/testing.md","filePath":"partials/testing.md","lastUpdated":1648088896000}'),E={name:"partials/testing.md"},i=t('<h1 id="testing-测试" tabindex="-1">Testing 测试 <a class="header-anchor" href="#testing-测试" aria-label="Permalink to &quot;Testing 测试&quot;">​</a></h1><h2 id="中间件" tabindex="-1">中间件 <a class="header-anchor" href="#中间件" aria-label="Permalink to &quot;中间件&quot;">​</a></h2><p>这里以一个路由中间件作为示例。<a href="https://github.com/curder/laravel-testing-demo/tree/middleware" target="_blank" rel="noreferrer">源代码查看</a></p>',3),F=s("div",{class:"language-php vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"php"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"<?"),s("span",{style:{color:"#79B8FF"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// tests/Unit/Http/Middleware/RedirectMiddlewareTest.php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"App\\Http\\Middleware\\RedirectMiddleware"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"App\\Models\\Redirect"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Support\\Facades\\Route"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Symfony\\Component\\HttpFoundation\\Response"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// 测试中间件逻辑是否正确")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"it"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'the middleware is in isolation'"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," () {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    $response "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," ("),s("span",{style:{color:"#F97583"}},"new"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"RedirectMiddleware"),s("span",{style:{color:"#E1E4E8"}},"())"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"handle"),s("span",{style:{color:"#E1E4E8"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#B392F0"}},"createRequest"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'get'"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#9ECBFF"}},"'/'"),s("span",{style:{color:"#E1E4E8"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#F97583"}},"fn"),s("span",{style:{color:"#E1E4E8"}}," () => "),s("span",{style:{color:"#F97583"}},"new"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Response"),s("span",{style:{color:"#E1E4E8"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    );")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#B392F0"}},"expect"),s("span",{style:{color:"#E1E4E8"}},"($response"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"isRedirect"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#B392F0"}},"url"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'/new-homepage'"),s("span",{style:{color:"#E1E4E8"}},")))"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"toBeFalse"),s("span",{style:{color:"#E1E4E8"}},"(); "),s("span",{style:{color:"#6A737D"}},"// 未配置跳转时，访问页面不会跳转")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#79B8FF"}},"Redirect"),s("span",{style:{color:"#F97583"}},"::"),s("span",{style:{color:"#B392F0"}},"factory"),s("span",{style:{color:"#E1E4E8"}},"()"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"create"),s("span",{style:{color:"#E1E4E8"}},"([")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#9ECBFF"}},"'from'"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"=>"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#9ECBFF"}},"'/'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#9ECBFF"}},"'to'"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"=>"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#9ECBFF"}},"'/new-homepage'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    ]);")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    $response "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," ("),s("span",{style:{color:"#F97583"}},"new"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"RedirectMiddleware"),s("span",{style:{color:"#E1E4E8"}},"())"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"handle"),s("span",{style:{color:"#E1E4E8"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#B392F0"}},"createRequest"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'get'"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#9ECBFF"}},"'/'"),s("span",{style:{color:"#E1E4E8"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#F97583"}},"fn"),s("span",{style:{color:"#E1E4E8"}}," () => "),s("span",{style:{color:"#F97583"}},"new"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Response"),s("span",{style:{color:"#E1E4E8"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    );")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#B392F0"}},"expect"),s("span",{style:{color:"#E1E4E8"}},"($response"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"isRedirect"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#B392F0"}},"url"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'/new-homepage'"),s("span",{style:{color:"#E1E4E8"}},")))"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"toBeTrue"),s("span",{style:{color:"#E1E4E8"}},"(); "),s("span",{style:{color:"#6A737D"}},"// 正确配置了跳转时，访问页面会跳转")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"});")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// 测试中间件能正常工作")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"it"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'will preform the right redirects'"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," () {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#79B8FF"}},"Route"),s("span",{style:{color:"#F97583"}},"::"),s("span",{style:{color:"#B392F0"}},"get"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'my-test-router'"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#F97583"}},"fn"),s("span",{style:{color:"#E1E4E8"}}," () => "),s("span",{style:{color:"#9ECBFF"}},"'ok'"),s("span",{style:{color:"#E1E4E8"}},")"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"middleware"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#79B8FF"}},"RedirectMiddleware"),s("span",{style:{color:"#F97583"}},"::class"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#79B8FF"}},"$this"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"get"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'/my-test-router'"),s("span",{style:{color:"#E1E4E8"}},")"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"assertOk"),s("span",{style:{color:"#E1E4E8"}},"();")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#79B8FF"}},"Redirect"),s("span",{style:{color:"#F97583"}},"::"),s("span",{style:{color:"#B392F0"}},"factory"),s("span",{style:{color:"#E1E4E8"}},"()"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"create"),s("span",{style:{color:"#E1E4E8"}},"([")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#9ECBFF"}},"'from'"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"=>"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#9ECBFF"}},"'/my-test-router'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#9ECBFF"}},"'to'"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"=>"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#9ECBFF"}},"'/new-homepage'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    ]);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#79B8FF"}},"$this"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"get"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'/my-test-router'"),s("span",{style:{color:"#E1E4E8"}},")"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"assertRedirect"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'/new-homepage'"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"});")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"createRequest"),s("span",{style:{color:"#E1E4E8"}},"($method, $uri)"),s("span",{style:{color:"#F97583"}},":"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"\\Illuminate\\Http\\Request")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    $symfony_request "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"\\Symfony\\Component\\HttpFoundation\\Request"),s("span",{style:{color:"#F97583"}},"::"),s("span",{style:{color:"#B392F0"}},"create"),s("span",{style:{color:"#E1E4E8"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        $uri,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        $method,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    );")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"return"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"\\Illuminate\\Http\\Request"),s("span",{style:{color:"#F97583"}},"::"),s("span",{style:{color:"#B392F0"}},"createFromBase"),s("span",{style:{color:"#E1E4E8"}},"($symfony_request);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"<?"),s("span",{style:{color:"#005CC5"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// tests/Unit/Http/Middleware/RedirectMiddlewareTest.php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"App\\Http\\Middleware\\RedirectMiddleware"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"App\\Models\\Redirect"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Support\\Facades\\Route"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Symfony\\Component\\HttpFoundation\\Response"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// 测试中间件逻辑是否正确")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"it"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'the middleware is in isolation'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," () {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    $response "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#D73A49"}},"new"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"RedirectMiddleware"),s("span",{style:{color:"#24292E"}},"())"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"handle"),s("span",{style:{color:"#24292E"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#6F42C1"}},"createRequest"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'get'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#032F62"}},"'/'"),s("span",{style:{color:"#24292E"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"fn"),s("span",{style:{color:"#24292E"}}," () => "),s("span",{style:{color:"#D73A49"}},"new"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Response"),s("span",{style:{color:"#24292E"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    );")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6F42C1"}},"expect"),s("span",{style:{color:"#24292E"}},"($response"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"isRedirect"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#6F42C1"}},"url"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'/new-homepage'"),s("span",{style:{color:"#24292E"}},")))"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"toBeFalse"),s("span",{style:{color:"#24292E"}},"(); "),s("span",{style:{color:"#6A737D"}},"// 未配置跳转时，访问页面不会跳转")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#005CC5"}},"Redirect"),s("span",{style:{color:"#D73A49"}},"::"),s("span",{style:{color:"#6F42C1"}},"factory"),s("span",{style:{color:"#24292E"}},"()"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"create"),s("span",{style:{color:"#24292E"}},"([")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},"'from'"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"=>"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'/'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},"'to'"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"=>"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'/new-homepage'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    ]);")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    $response "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#D73A49"}},"new"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"RedirectMiddleware"),s("span",{style:{color:"#24292E"}},"())"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"handle"),s("span",{style:{color:"#24292E"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#6F42C1"}},"createRequest"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'get'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#032F62"}},"'/'"),s("span",{style:{color:"#24292E"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"fn"),s("span",{style:{color:"#24292E"}}," () => "),s("span",{style:{color:"#D73A49"}},"new"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Response"),s("span",{style:{color:"#24292E"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    );")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6F42C1"}},"expect"),s("span",{style:{color:"#24292E"}},"($response"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"isRedirect"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#6F42C1"}},"url"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'/new-homepage'"),s("span",{style:{color:"#24292E"}},")))"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"toBeTrue"),s("span",{style:{color:"#24292E"}},"(); "),s("span",{style:{color:"#6A737D"}},"// 正确配置了跳转时，访问页面会跳转")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"});")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// 测试中间件能正常工作")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"it"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'will preform the right redirects'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," () {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#005CC5"}},"Route"),s("span",{style:{color:"#D73A49"}},"::"),s("span",{style:{color:"#6F42C1"}},"get"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'my-test-router'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#D73A49"}},"fn"),s("span",{style:{color:"#24292E"}}," () => "),s("span",{style:{color:"#032F62"}},"'ok'"),s("span",{style:{color:"#24292E"}},")"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"middleware"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#005CC5"}},"RedirectMiddleware"),s("span",{style:{color:"#D73A49"}},"::class"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#005CC5"}},"$this"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"get"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'/my-test-router'"),s("span",{style:{color:"#24292E"}},")"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"assertOk"),s("span",{style:{color:"#24292E"}},"();")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#005CC5"}},"Redirect"),s("span",{style:{color:"#D73A49"}},"::"),s("span",{style:{color:"#6F42C1"}},"factory"),s("span",{style:{color:"#24292E"}},"()"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"create"),s("span",{style:{color:"#24292E"}},"([")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},"'from'"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"=>"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'/my-test-router'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},"'to'"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"=>"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'/new-homepage'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    ]);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#005CC5"}},"$this"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"get"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'/my-test-router'"),s("span",{style:{color:"#24292E"}},")"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"assertRedirect"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'/new-homepage'"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"});")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"createRequest"),s("span",{style:{color:"#24292E"}},"($method, $uri)"),s("span",{style:{color:"#D73A49"}},":"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"\\Illuminate\\Http\\Request")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    $symfony_request "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"\\Symfony\\Component\\HttpFoundation\\Request"),s("span",{style:{color:"#D73A49"}},"::"),s("span",{style:{color:"#6F42C1"}},"create"),s("span",{style:{color:"#24292E"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        $uri,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        $method,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    );")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"\\Illuminate\\Http\\Request"),s("span",{style:{color:"#D73A49"}},"::"),s("span",{style:{color:"#6F42C1"}},"createFromBase"),s("span",{style:{color:"#24292E"}},"($symfony_request);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),u=s("div",{class:"language-php vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"php"),s("pre",{class:"shiki github-dark has-highlighted-lines vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"<?"),s("span",{style:{color:"#79B8FF"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// app\\Http\\Middleware\\RedirectMiddleware.php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"namespace"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"App\\Http\\Middleware"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"App\\Models\\Redirect"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Closure"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Http\\Request"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"class"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"RedirectMiddleware")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * Handle an incoming request.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     *")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * "),s("span",{style:{color:"#F97583"}},"@param"),s("span",{style:{color:"#6A737D"}},"  "),s("span",{style:{color:"#79B8FF"}},"\\Illuminate\\Http\\Request"),s("span",{style:{color:"#6A737D"}},"  $request")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * "),s("span",{style:{color:"#F97583"}},"@param"),s("span",{style:{color:"#6A737D"}},"  "),s("span",{style:{color:"#79B8FF"}},"\\Closure"),s("span",{style:{color:"#6A737D"}},"("),s("span",{style:{color:"#79B8FF"}},"\\Illuminate\\Http\\Request"),s("span",{style:{color:"#6A737D"}},"): ("),s("span",{style:{color:"#79B8FF"}},"\\Illuminate\\Http\\Response"),s("span",{style:{color:"#6A737D"}},"|"),s("span",{style:{color:"#79B8FF"}},"\\Illuminate\\Http\\RedirectResponse"),s("span",{style:{color:"#6A737D"}},")  $"),s("span",{style:{color:"#79B8FF"}},"next")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * @"),s("span",{style:{color:"#79B8FF"}},"return"),s("span",{style:{color:"#6A737D"}}," "),s("span",{style:{color:"#79B8FF"}},"\\Illuminate\\Http\\Response"),s("span",{style:{color:"#6A737D"}},"|"),s("span",{style:{color:"#79B8FF"}},"\\Illuminate\\Http\\RedirectResponse")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"public"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"handle"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#79B8FF"}},"Request"),s("span",{style:{color:"#E1E4E8"}}," $request, "),s("span",{style:{color:"#79B8FF"}},"Closure"),s("span",{style:{color:"#E1E4E8"}}," $next)")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#E1E4E8"}},"    {")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#E1E4E8"}},"        $path "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"parse_url"),s("span",{style:{color:"#E1E4E8"}},"($request"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"fullUrl"),s("span",{style:{color:"#E1E4E8"}},"(), "),s("span",{style:{color:"#79B8FF"}},"PHP_URL_PATH"),s("span",{style:{color:"#E1E4E8"}},") "),s("span",{style:{color:"#F97583"}},"??"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#9ECBFF"}},"'/'"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line highlighted"},[s("wbr")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#E1E4E8"}},"        $redirect "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Redirect"),s("span",{style:{color:"#F97583"}},"::"),s("span",{style:{color:"#B392F0"}},"query"),s("span",{style:{color:"#E1E4E8"}},"()"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"where"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'from'"),s("span",{style:{color:"#E1E4E8"}},", $path)"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"first"),s("span",{style:{color:"#E1E4E8"}},"();")]),l(`
`),s("span",{class:"line highlighted"},[s("wbr")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#F97583"}},"if"),s("span",{style:{color:"#E1E4E8"}}," ("),s("span",{style:{color:"#F97583"}},"!"),s("span",{style:{color:"#E1E4E8"}}," $redirect) {")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#E1E4E8"}},"            "),s("span",{style:{color:"#F97583"}},"return"),s("span",{style:{color:"#E1E4E8"}}," $next($request);")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#E1E4E8"}},"        }")]),l(`
`),s("span",{class:"line highlighted"},[s("wbr")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#F97583"}},"return"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"response"),s("span",{style:{color:"#E1E4E8"}},"()"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"redirectTo"),s("span",{style:{color:"#E1E4E8"}},"($redirect"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#E1E4E8"}},"to);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light has-highlighted-lines vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"<?"),s("span",{style:{color:"#005CC5"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// app\\Http\\Middleware\\RedirectMiddleware.php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"namespace"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"App\\Http\\Middleware"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"App\\Models\\Redirect"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Closure"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Http\\Request"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"class"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"RedirectMiddleware")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * Handle an incoming request.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     *")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * "),s("span",{style:{color:"#D73A49"}},"@param"),s("span",{style:{color:"#6A737D"}},"  "),s("span",{style:{color:"#005CC5"}},"\\Illuminate\\Http\\Request"),s("span",{style:{color:"#6A737D"}},"  $request")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * "),s("span",{style:{color:"#D73A49"}},"@param"),s("span",{style:{color:"#6A737D"}},"  "),s("span",{style:{color:"#005CC5"}},"\\Closure"),s("span",{style:{color:"#6A737D"}},"("),s("span",{style:{color:"#005CC5"}},"\\Illuminate\\Http\\Request"),s("span",{style:{color:"#6A737D"}},"): ("),s("span",{style:{color:"#005CC5"}},"\\Illuminate\\Http\\Response"),s("span",{style:{color:"#6A737D"}},"|"),s("span",{style:{color:"#005CC5"}},"\\Illuminate\\Http\\RedirectResponse"),s("span",{style:{color:"#6A737D"}},")  $"),s("span",{style:{color:"#005CC5"}},"next")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * @"),s("span",{style:{color:"#005CC5"}},"return"),s("span",{style:{color:"#6A737D"}}," "),s("span",{style:{color:"#005CC5"}},"\\Illuminate\\Http\\Response"),s("span",{style:{color:"#6A737D"}},"|"),s("span",{style:{color:"#005CC5"}},"\\Illuminate\\Http\\RedirectResponse")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"public"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"handle"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#005CC5"}},"Request"),s("span",{style:{color:"#24292E"}}," $request, "),s("span",{style:{color:"#005CC5"}},"Closure"),s("span",{style:{color:"#24292E"}}," $next)")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"    {")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"        $path "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"parse_url"),s("span",{style:{color:"#24292E"}},"($request"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"fullUrl"),s("span",{style:{color:"#24292E"}},"(), "),s("span",{style:{color:"#005CC5"}},"PHP_URL_PATH"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"??"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'/'"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line highlighted"},[s("wbr")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"        $redirect "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Redirect"),s("span",{style:{color:"#D73A49"}},"::"),s("span",{style:{color:"#6F42C1"}},"query"),s("span",{style:{color:"#24292E"}},"()"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"where"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'from'"),s("span",{style:{color:"#24292E"}},", $path)"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"first"),s("span",{style:{color:"#24292E"}},"();")]),l(`
`),s("span",{class:"line highlighted"},[s("wbr")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#D73A49"}},"!"),s("span",{style:{color:"#24292E"}}," $redirect) {")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," $next($request);")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"        }")]),l(`
`),s("span",{class:"line highlighted"},[s("wbr")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"response"),s("span",{style:{color:"#24292E"}},"()"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"redirectTo"),s("span",{style:{color:"#24292E"}},"($redirect"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#24292E"}},"to);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),d=s("div",{class:"language-php vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"php"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"<?"),s("span",{style:{color:"#79B8FF"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// app/Models/Redirect.php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"namespace"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"App\\Models"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Database\\Eloquent\\Factories\\HasFactory"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Database\\Eloquent\\Model"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"class"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"Redirect"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"extends"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"Model")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"HasFactory"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"<?"),s("span",{style:{color:"#005CC5"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// app/Models/Redirect.php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"namespace"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"App\\Models"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Database\\Eloquent\\Factories\\HasFactory"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Database\\Eloquent\\Model"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"class"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"Redirect"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"extends"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"Model")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"HasFactory"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),C=s("div",{class:"language-php vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"php"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"<?"),s("span",{style:{color:"#79B8FF"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// database/migrations/2022_03_23_121330_create_redirects_table.php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Database\\Migrations\\Migration"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Database\\Schema\\Blueprint"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Support\\Facades\\Schema"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"class"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"CreateRedirectsTable"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"extends"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"Migration")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * Run the migrations.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     *")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * "),s("span",{style:{color:"#F97583"}},"@return"),s("span",{style:{color:"#6A737D"}}," "),s("span",{style:{color:"#F97583"}},"void")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"public"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"up"),s("span",{style:{color:"#E1E4E8"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#79B8FF"}},"Schema"),s("span",{style:{color:"#F97583"}},"::"),s("span",{style:{color:"#B392F0"}},"create"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'redirects'"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," ("),s("span",{style:{color:"#79B8FF"}},"Blueprint"),s("span",{style:{color:"#E1E4E8"}}," $table) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            $table"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"id"),s("span",{style:{color:"#E1E4E8"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            $table"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"string"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'from'"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            $table"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"string"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'to'"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            $table"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"timestamps"),s("span",{style:{color:"#E1E4E8"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        });")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * Reverse the migrations.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     *")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * "),s("span",{style:{color:"#F97583"}},"@return"),s("span",{style:{color:"#6A737D"}}," "),s("span",{style:{color:"#F97583"}},"void")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"public"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"down"),s("span",{style:{color:"#E1E4E8"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#79B8FF"}},"Schema"),s("span",{style:{color:"#F97583"}},"::"),s("span",{style:{color:"#B392F0"}},"dropIfExists"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'redirects'"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"<?"),s("span",{style:{color:"#005CC5"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// database/migrations/2022_03_23_121330_create_redirects_table.php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Database\\Migrations\\Migration"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Database\\Schema\\Blueprint"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Support\\Facades\\Schema"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"class"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"CreateRedirectsTable"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"extends"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"Migration")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * Run the migrations.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     *")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * "),s("span",{style:{color:"#D73A49"}},"@return"),s("span",{style:{color:"#6A737D"}}," "),s("span",{style:{color:"#D73A49"}},"void")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"public"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"up"),s("span",{style:{color:"#24292E"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"Schema"),s("span",{style:{color:"#D73A49"}},"::"),s("span",{style:{color:"#6F42C1"}},"create"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'redirects'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#005CC5"}},"Blueprint"),s("span",{style:{color:"#24292E"}}," $table) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            $table"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"id"),s("span",{style:{color:"#24292E"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            $table"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"string"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'from'"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            $table"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"string"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'to'"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            $table"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"timestamps"),s("span",{style:{color:"#24292E"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        });")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * Reverse the migrations.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     *")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * "),s("span",{style:{color:"#D73A49"}},"@return"),s("span",{style:{color:"#6A737D"}}," "),s("span",{style:{color:"#D73A49"}},"void")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"public"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"down"),s("span",{style:{color:"#24292E"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"Schema"),s("span",{style:{color:"#D73A49"}},"::"),s("span",{style:{color:"#6F42C1"}},"dropIfExists"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'redirects'"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),A=s("div",{class:"language-php vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"php"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"<?"),s("span",{style:{color:"#79B8FF"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// database/factories/RedirectFactory.php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"namespace"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"Database\\Factories"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Database\\Eloquent\\Factories\\Factory"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"class"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"RedirectFactory"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"extends"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"Factory")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * Define the model's default state.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     *")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * "),s("span",{style:{color:"#F97583"}},"@return"),s("span",{style:{color:"#6A737D"}}," "),s("span",{style:{color:"#F97583"}},"array")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"public"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"definition"),s("span",{style:{color:"#E1E4E8"}},"()"),s("span",{style:{color:"#F97583"}},":"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"array")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#F97583"}},"return"),s("span",{style:{color:"#E1E4E8"}}," [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            "),s("span",{style:{color:"#9ECBFF"}},"'from'"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"=>"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"parse_url"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#79B8FF"}},"$this"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#E1E4E8"}},"faker"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"unique"),s("span",{style:{color:"#E1E4E8"}},"()"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"url"),s("span",{style:{color:"#E1E4E8"}},"(), "),s("span",{style:{color:"#79B8FF"}},"PHP_URL_PATH"),s("span",{style:{color:"#E1E4E8"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            "),s("span",{style:{color:"#9ECBFF"}},"'to'"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"=>"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"parse_url"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#79B8FF"}},"$this"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#E1E4E8"}},"faker"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"unique"),s("span",{style:{color:"#E1E4E8"}},"()"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"url"),s("span",{style:{color:"#E1E4E8"}},"(), "),s("span",{style:{color:"#79B8FF"}},"PHP_URL_PATH"),s("span",{style:{color:"#E1E4E8"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        ];")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"<?"),s("span",{style:{color:"#005CC5"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// database/factories/RedirectFactory.php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"namespace"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"Database\\Factories"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Database\\Eloquent\\Factories\\Factory"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"class"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"RedirectFactory"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"extends"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"Factory")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * Define the model's default state.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     *")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * "),s("span",{style:{color:"#D73A49"}},"@return"),s("span",{style:{color:"#6A737D"}}," "),s("span",{style:{color:"#D73A49"}},"array")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"public"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"definition"),s("span",{style:{color:"#24292E"}},"()"),s("span",{style:{color:"#D73A49"}},":"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"array")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#032F62"}},"'from'"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"=>"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"parse_url"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#005CC5"}},"$this"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#24292E"}},"faker"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"unique"),s("span",{style:{color:"#24292E"}},"()"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"url"),s("span",{style:{color:"#24292E"}},"(), "),s("span",{style:{color:"#005CC5"}},"PHP_URL_PATH"),s("span",{style:{color:"#24292E"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#032F62"}},"'to'"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"=>"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"parse_url"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#005CC5"}},"$this"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#24292E"}},"faker"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"unique"),s("span",{style:{color:"#24292E"}},"()"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"url"),s("span",{style:{color:"#24292E"}},"(), "),s("span",{style:{color:"#005CC5"}},"PHP_URL_PATH"),s("span",{style:{color:"#24292E"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        ];")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),h=t(`<h2 id="测试是否将正确的数据传递给视图" tabindex="-1">测试是否将正确的数据传递给视图 <a class="header-anchor" href="#测试是否将正确的数据传递给视图" aria-label="Permalink to &quot;测试是否将正确的数据传递给视图&quot;">​</a></h2><p>需要测试是否将正确的数据传递给视图？可以在响应中使用 <code>viewData</code> 方法。</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">/** @test */</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">it_has_the_correct_value</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">    $response </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">$this</span><span style="color:#F97583;">-&gt;</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/some-route&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">$this</span><span style="color:#F97583;">-&gt;</span><span style="color:#B392F0;">assertEquals</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;John Doe&#39;</span><span style="color:#E1E4E8;">, $response</span><span style="color:#F97583;">-&gt;</span><span style="color:#B392F0;">viewData</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;name&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/** @test */</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">it_contains_a_given_record</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">    $response </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">$this</span><span style="color:#F97583;">-&gt;</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/some-route&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">$this</span><span style="color:#F97583;">-&gt;</span><span style="color:#B392F0;">assertTrue</span><span style="color:#E1E4E8;">($response</span><span style="color:#F97583;">-&gt;</span><span style="color:#B392F0;">viewData</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;users&#39;</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">-&gt;</span><span style="color:#B392F0;">contains</span><span style="color:#E1E4E8;">($userA));</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/** @test */</span></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">it_returns_the_correct_amount_of_records</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">    $response </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">$this</span><span style="color:#F97583;">-&gt;</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/some-route&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">$this</span><span style="color:#F97583;">-&gt;</span><span style="color:#B392F0;">assertCount</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, $response</span><span style="color:#F97583;">-&gt;</span><span style="color:#B392F0;">viewData</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;users&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/** @test */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">it_has_the_correct_value</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">    $response </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">$this</span><span style="color:#D73A49;">-&gt;</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;/some-route&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">$this</span><span style="color:#D73A49;">-&gt;</span><span style="color:#6F42C1;">assertEquals</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;John Doe&#39;</span><span style="color:#24292E;">, $response</span><span style="color:#D73A49;">-&gt;</span><span style="color:#6F42C1;">viewData</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;name&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/** @test */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">it_contains_a_given_record</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">    $response </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">$this</span><span style="color:#D73A49;">-&gt;</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;/some-route&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">$this</span><span style="color:#D73A49;">-&gt;</span><span style="color:#6F42C1;">assertTrue</span><span style="color:#24292E;">($response</span><span style="color:#D73A49;">-&gt;</span><span style="color:#6F42C1;">viewData</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;users&#39;</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">-&gt;</span><span style="color:#6F42C1;">contains</span><span style="color:#24292E;">($userA));</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/** @test */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">it_returns_the_correct_amount_of_records</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">    $response </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">$this</span><span style="color:#D73A49;">-&gt;</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;/some-route&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">$this</span><span style="color:#D73A49;">-&gt;</span><span style="color:#6F42C1;">assertCount</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">, $response</span><span style="color:#D73A49;">-&gt;</span><span style="color:#6F42C1;">viewData</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;users&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="测试命令定时执行" tabindex="-1">测试命令定时执行 <a class="header-anchor" href="#测试命令定时执行" aria-label="Permalink to &quot;测试命令定时执行&quot;">​</a></h2><p>断言定时任务一定会按照指定的规则执行。</p>`,5),D=s("div",{class:"language-php vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"php"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// App\\Console\\Kernel")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"<?"),s("span",{style:{color:"#79B8FF"}},"php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"namespace"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"App\\Console"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Console\\Scheduling\\Schedule"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Foundation\\Console\\Kernel"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"as"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"ConsoleKernel"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Support\\Str"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"class"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"Kernel"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"extends"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"ConsoleKernel")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Console\\Scheduling\\Schedule"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Foundation\\Console\\Kernel"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"as"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"ConsoleKernel"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"protected"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"schedule"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#79B8FF"}},"Schedule"),s("span",{style:{color:"#E1E4E8"}}," $schedule)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        $schedule"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"command"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'check:api-token'"),s("span",{style:{color:"#E1E4E8"}},")"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"dailyAt"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'10:00'"),s("span",{style:{color:"#E1E4E8"}},"); "),s("span",{style:{color:"#6A737D"}},"// 检查是否需要发送apiToken到期通知")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// App\\Console\\Kernel")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"<?"),s("span",{style:{color:"#005CC5"}},"php")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"namespace"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"App\\Console"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Console\\Scheduling\\Schedule"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Foundation\\Console\\Kernel"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ConsoleKernel"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Support\\Str"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"class"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"Kernel"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"extends"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ConsoleKernel")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Console\\Scheduling\\Schedule"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Foundation\\Console\\Kernel"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ConsoleKernel"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"protected"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"schedule"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#005CC5"}},"Schedule"),s("span",{style:{color:"#24292E"}}," $schedule)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        $schedule"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"command"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'check:api-token'"),s("span",{style:{color:"#24292E"}},")"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"dailyAt"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'10:00'"),s("span",{style:{color:"#24292E"}},"); "),s("span",{style:{color:"#6A737D"}},"// 检查是否需要发送apiToken到期通知")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),B=s("div",{class:"language-php vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"php"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// Test")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"<?"),s("span",{style:{color:"#79B8FF"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"namespace"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"Tests\\Integrations\\Console"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Tests\\TestCase"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Support\\Str"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Console\\Scheduling\\Event"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"use"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"Illuminate\\Console\\Scheduling\\Schedule"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"class"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"KernelTest"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"extends"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"TestCase")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#6A737D"}},"/** @test */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"public"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"check_api_token_command_is_scheduled_at_10am"),s("span",{style:{color:"#E1E4E8"}},"()"),s("span",{style:{color:"#F97583"}},":"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"void")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        $schedule "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"app"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#79B8FF"}},"Schedule"),s("span",{style:{color:"#F97583"}},"::class"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#6A737D"}},"/** "),s("span",{style:{color:"#F97583"}},"@var"),s("span",{style:{color:"#6A737D"}}," "),s("span",{style:{color:"#79B8FF"}},"Event"),s("span",{style:{color:"#6A737D"}}," $event */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        $event "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"collect"),s("span",{style:{color:"#E1E4E8"}},"($schedule"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"events"),s("span",{style:{color:"#E1E4E8"}},"())")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            "),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"filter"),s("span",{style:{color:"#E1E4E8"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                "),s("span",{style:{color:"#F97583"}},"fn"),s("span",{style:{color:"#E1E4E8"}}," ("),s("span",{style:{color:"#79B8FF"}},"Event"),s("span",{style:{color:"#E1E4E8"}}," $event) =>  "),s("span",{style:{color:"#79B8FF"}},"Str"),s("span",{style:{color:"#F97583"}},"::"),s("span",{style:{color:"#B392F0"}},"containsAll"),s("span",{style:{color:"#E1E4E8"}},"($event"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#E1E4E8"}},"command, ["),s("span",{style:{color:"#9ECBFF"}},"'check:api_token'"),s("span",{style:{color:"#E1E4E8"}},"]),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            )"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"first"),s("span",{style:{color:"#E1E4E8"}},"();")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#79B8FF"}},"$this"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"assertInstanceOf"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#79B8FF"}},"Event"),s("span",{style:{color:"#F97583"}},"::class"),s("span",{style:{color:"#E1E4E8"}},", $event);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#79B8FF"}},"$this"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#B392F0"}},"assertEquals"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'0 10 * * *'"),s("span",{style:{color:"#E1E4E8"}},", $event"),s("span",{style:{color:"#F97583"}},"->"),s("span",{style:{color:"#E1E4E8"}},"expression);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// Test")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"<?"),s("span",{style:{color:"#005CC5"}},"php")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"namespace"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"Tests\\Integrations\\Console"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Tests\\TestCase"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Support\\Str"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Console\\Scheduling\\Event"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"use"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Illuminate\\Console\\Scheduling\\Schedule"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"class"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"KernelTest"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"extends"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"TestCase")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"/** @test */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"public"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"check_api_token_command_is_scheduled_at_10am"),s("span",{style:{color:"#24292E"}},"()"),s("span",{style:{color:"#D73A49"}},":"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"void")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        $schedule "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"app"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#005CC5"}},"Schedule"),s("span",{style:{color:"#D73A49"}},"::class"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#6A737D"}},"/** "),s("span",{style:{color:"#D73A49"}},"@var"),s("span",{style:{color:"#6A737D"}}," "),s("span",{style:{color:"#005CC5"}},"Event"),s("span",{style:{color:"#6A737D"}}," $event */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        $event "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"collect"),s("span",{style:{color:"#24292E"}},"($schedule"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"events"),s("span",{style:{color:"#24292E"}},"())")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"filter"),s("span",{style:{color:"#24292E"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"fn"),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#005CC5"}},"Event"),s("span",{style:{color:"#24292E"}}," $event) =>  "),s("span",{style:{color:"#005CC5"}},"Str"),s("span",{style:{color:"#D73A49"}},"::"),s("span",{style:{color:"#6F42C1"}},"containsAll"),s("span",{style:{color:"#24292E"}},"($event"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#24292E"}},"command, ["),s("span",{style:{color:"#032F62"}},"'check:api_token'"),s("span",{style:{color:"#24292E"}},"]),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            )"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"first"),s("span",{style:{color:"#24292E"}},"();")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"$this"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"assertInstanceOf"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#005CC5"}},"Event"),s("span",{style:{color:"#D73A49"}},"::class"),s("span",{style:{color:"#24292E"}},", $event);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"$this"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#6F42C1"}},"assertEquals"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'0 10 * * *'"),s("span",{style:{color:"#24292E"}},", $event"),s("span",{style:{color:"#D73A49"}},"->"),s("span",{style:{color:"#24292E"}},"expression);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),m=s("p",null,[l("其他的简单测试示例代码 "),s("a",{href:"https://github.com/curder/laravel-console-command-test-demo",target:"_blank",rel:"noreferrer"},"curder/laravel-console-command-test-demo"),l(" 。")],-1);function g(_,$,f,R,v,b){const a=p("CodeGroupItem"),e=p("CodeGroup");return r(),y("div",null,[i,o(e,null,{default:n(()=>[o(a,{title:"测试"},{default:n(()=>[F]),_:1}),o(a,{title:"定义"},{default:n(()=>[u]),_:1}),o(a,{title:"模型文件"},{default:n(()=>[d]),_:1}),o(a,{title:"迁移文件"},{default:n(()=>[C]),_:1}),o(a,{title:"Factory文件"},{default:n(()=>[A]),_:1})]),_:1}),h,o(e,null,{default:n(()=>[o(a,{title:"App\\Console\\Kernel.php"},{default:n(()=>[D]),_:1}),o(a,{title:"Tests\\Integrations\\Console\\KernelTest.php"},{default:n(()=>[B]),_:1})]),_:1}),m])}const I=c(E,[["render",g]]);export{k as __pageData,I as default};
