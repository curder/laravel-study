<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.33">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>ä½¿ç”¨ pest æµ‹è¯• Laravel API | Laravel å­¦ä¹ è®°å½•</title><meta name="description" content="Laravelå­¦ä¹ ç‚¹æ»´">
    <link rel="modulepreload" href="/laravel-study/assets/app.ec5e6153.js"><link rel="modulepreload" href="/laravel-study/assets/unit-test-laravel-api-pest-framework.html.bb6a2725.js"><link rel="modulepreload" href="/laravel-study/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/laravel-study/assets/unit-test-laravel-api-pest-framework.html.829a67fa.js">
    <link rel="stylesheet" href="/laravel-study/assets/style.804f45ca.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/laravel-study/" class=""><img class="logo" src="/laravel-study/images/laravel-logo.min.svg" alt="Laravel å­¦ä¹ è®°å½•"><span class="site-name can-hide">Laravel å­¦ä¹ è®°å½•</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/laravel-study/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/laravel-study/collections/" class="" aria-label="Collection é›†åˆ"><!--[--><!--]--> Collection é›†åˆ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/model/" class="" aria-label="Eloquent æ¨¡å‹"><!--[--><!--]--> Eloquent æ¨¡å‹ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/laravel-study/partials/" class="" aria-label="ä»£ç ç‰‡æ®µ"><!--[--><!--]--> ä»£ç ç‰‡æ®µ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/tests/" class="router-link-active" aria-label="æµ‹è¯•"><!--[--><!--]--> æµ‹è¯• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/others/" class="" aria-label="å…¶å®ƒ"><!--[--><!--]--> å…¶å®ƒ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ“–ğŸ“š"><span class="title">ğŸ“–ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ“–ğŸ“š"><span class="title">ğŸ“–ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://curder.github.io/blog/" rel="noopener noreferrer" target="_blank" aria-label="Bolg"><!--[--><!--]--> Bolg <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://curder.github.io/what-is-new-in-php/" rel="noopener noreferrer" target="_blank" aria-label="What is new in PHP"><!--[--><!--]--> What is new in PHP <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://curder.github.io/setup-mac-for-developer/" rel="noopener noreferrer" target="_blank" aria-label="Setup mac for developer"><!--[--><!--]--> Setup mac for developer <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/laravel-study/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/laravel-study/collections/" class="" aria-label="Collection é›†åˆ"><!--[--><!--]--> Collection é›†åˆ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/model/" class="" aria-label="Eloquent æ¨¡å‹"><!--[--><!--]--> Eloquent æ¨¡å‹ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/laravel-study/partials/" class="" aria-label="ä»£ç ç‰‡æ®µ"><!--[--><!--]--> ä»£ç ç‰‡æ®µ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/tests/" class="router-link-active" aria-label="æµ‹è¯•"><!--[--><!--]--> æµ‹è¯• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/others/" class="" aria-label="å…¶å®ƒ"><!--[--><!--]--> å…¶å®ƒ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ“–ğŸ“š"><span class="title">ğŸ“–ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ“–ğŸ“š"><span class="title">ğŸ“–ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://curder.github.io/blog/" rel="noopener noreferrer" target="_blank" aria-label="Bolg"><!--[--><!--]--> Bolg <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://curder.github.io/what-is-new-in-php/" rel="noopener noreferrer" target="_blank" aria-label="What is new in PHP"><!--[--><!--]--> What is new in PHP <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://curder.github.io/setup-mac-for-developer/" rel="noopener noreferrer" target="_blank" aria-label="Setup mac for developer"><!--[--><!--]--> Setup mac for developer <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p class="sidebar-item sidebar-heading active">æµ‹è¯• <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="ä½¿ç”¨ pest æµ‹è¯• Laravel API"><!--[--><!--]--> ä½¿ç”¨ pest æµ‹è¯• Laravel API <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html#æŠ€æœ¯è¦æ±‚" class="router-link-active router-link-exact-active sidebar-item" aria-label="æŠ€æœ¯è¦æ±‚"><!--[--><!--]--> æŠ€æœ¯è¦æ±‚ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html#å®‰è£…-laravel" class="router-link-active router-link-exact-active sidebar-item" aria-label="å®‰è£… Laravel"><!--[--><!--]--> å®‰è£… Laravel <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html#å®‰è£…-pest" class="router-link-active router-link-exact-active sidebar-item" aria-label="å®‰è£… Pest"><!--[--><!--]--> å®‰è£… Pest <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html#åˆ›å»ºå¾…åŠäº‹é¡¹æ¨¡å‹-è¿ç§»å’Œæ§åˆ¶å™¨" class="router-link-active router-link-exact-active sidebar-item" aria-label="åˆ›å»ºå¾…åŠäº‹é¡¹æ¨¡å‹ï¼Œè¿ç§»å’Œæ§åˆ¶å™¨"><!--[--><!--]--> åˆ›å»ºå¾…åŠäº‹é¡¹æ¨¡å‹ï¼Œè¿ç§»å’Œæ§åˆ¶å™¨ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html#ä¿®æ”¹æ¨¡å‹å·¥å‚" class="router-link-active router-link-exact-active sidebar-item" aria-label="ä¿®æ”¹æ¨¡å‹å·¥å‚"><!--[--><!--]--> ä¿®æ”¹æ¨¡å‹å·¥å‚ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html#é…ç½®æ•°æ®åº“" class="router-link-active router-link-exact-active sidebar-item" aria-label="é…ç½®æ•°æ®åº“"><!--[--><!--]--> é…ç½®æ•°æ®åº“ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html#ç¼–å†™æµ‹è¯•" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç¼–å†™æµ‹è¯•"><!--[--><!--]--> ç¼–å†™æµ‹è¯• <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html#ç”Ÿæˆå¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åº" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç”Ÿæˆå¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åº"><!--[--><!--]--> ç”Ÿæˆå¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åº <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html#ç»“è®º" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç»“è®º"><!--[--><!--]--> ç»“è®º <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/tests/unit-test-laravel-api-pest-framework.html#åŸæ–‡é“¾æ¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="åŸæ–‡é“¾æ¥"><!--[--><!--]--> åŸæ–‡é“¾æ¥ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="ä½¿ç”¨-pest-æµ‹è¯•-laravel-api" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-pest-æµ‹è¯•-laravel-api" aria-hidden="true">#</a> ä½¿ç”¨ pest æµ‹è¯• Laravel API</h1><p><a href="https://pestphp.com/" target="_blank" rel="noopener noreferrer">Pest<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> æ˜¯ <a href="https://twitter.com/enunomaduro" target="_blank" rel="noopener noreferrer">Nuno Maduro<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> å¼€å‘çš„ä¸€ä¸ªæ–°çš„æµ‹è¯•PHPæ¡†æ¶ã€‚</p><p>è™½ç„¶ Pest æœ¬èº«æ˜¯å»ºç«‹åœ¨æµè¡Œçš„PHPæµ‹è¯•æ¡†æ¶ PHPUnit ä¹‹ä¸Šï¼Œä½† Pest æ—¨åœ¨ä¸ºç¼–å†™æµ‹è¯•æä¾›æ›´å¥½çš„ä½“éªŒï¼Œå“²å­¦å¾ˆç®€å•ã€‚</p><p>é€šè¿‡æä¾›å¯Œæœ‰è¡¨ç°åŠ›çš„ç•Œé¢ï¼Œä½¿ TDD ä½“éªŒç®€å•è€Œä¼˜é›…ã€‚</p><p>åœ¨æœ¬æ–‡ä¸­äº†è§£å¦‚ä½•åœ¨ Laravel é¡¹ç›®ä¸­å¼€å§‹ä½¿ç”¨ Pest ã€‚</p><p>ä½¿ç”¨æµ‹è¯•é©±åŠ¨çš„æ–¹æ³•ï¼Œå°†æ„å»ºä¸€ä¸ªç®€å•çš„ <code>todos</code> å¾…åŠåº”ç”¨ç¨‹åºï¼Œå¯ä»¥åˆ›å»ºã€ç¼–è¾‘ã€æ›´æ–°å’Œåˆ é™¤ä»»åŠ¡ã€‚</p><h2 id="æŠ€æœ¯è¦æ±‚" tabindex="-1"><a class="header-anchor" href="#æŠ€æœ¯è¦æ±‚" aria-hidden="true">#</a> æŠ€æœ¯è¦æ±‚</h2><ul><li>PHP 7.3 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚Pestéœ€è¦PHP 7.3+æ‰èƒ½è¿è¡Œã€‚</li><li><a href="https://laravel.com/docs/8.x/installation" target="_blank" rel="noopener noreferrer">Laravel 8<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://getcomposer.org/" target="_blank" rel="noopener noreferrer">Composer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li>å¯¹ <a href="https://phpunit.readthedocs.io/en/9.0/index.html" target="_blank" rel="noopener noreferrer">PHPUnit<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> çš„åŸºæœ¬äº†è§£</li><li>å¯¹ SQLite åŸºæœ¬äº†è§£ï¼Œæœ¬æ–‡å°†ä½¿ç”¨ SQLiteï¼Œå› ä¸ºå®ƒå¯ä»¥æ›´å¿«åœ°è¿è¡Œæµ‹è¯•ã€‚</li></ul><h2 id="å®‰è£…-laravel" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-laravel" aria-hidden="true">#</a> å®‰è£… Laravel</h2><p>è®¾ç½®æ–°çš„ Laravel é¡¹ç›®æœ‰å¤šç§æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ Laravel å®‰è£…ç¨‹åºæˆ–ä½¿ç”¨ Composer è¿›è¡Œæ“ä½œï¼Œè¿™é‡Œä½¿ç”¨ Composer ã€‚</p><p>åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">composer</span> create-project --prefer-dist laravel/laravel:^8.0 laravel-pest-todo-test-demo
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>è¿™å°†åœ¨ <code>laravel-pest-todo-test-demo</code> ç›®å½•ä¸­ä¸ºæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªæ–°çš„ Laravel 8 çš„é¡¹ç›®ã€‚</p><h2 id="å®‰è£…-pest" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-pest" aria-hidden="true">#</a> å®‰è£… Pest</h2><p>ç°åœ¨å·²ç»å»ºç«‹äº†ä¸€ä¸ªæ–°çš„ Laravel 8 é¡¹ç›®ï¼Œè¿˜éœ€è¦æ‰§è¡Œå‡ ä¸ªé¢å¤–çš„æ­¥éª¤æ¥ä¸ Laravel ä¸€èµ·å»ºç«‹ <a href="">Pest</a>ã€‚</p><p>è¿›å…¥ <code>laravel-pest-todo-test-demo</code> ç›®å½•ï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… <a href="https://pestphp.com/docs/plugins/laravel/" target="_blank" rel="noopener noreferrer">Laravel Pestæ’ä»¶<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> laravel-pest-todo-test-demo

<span class="token function">composer</span> require --dev pestphp/pest-plugin-laravel
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">æ³¨æ„</p><p>ç”±äºå½“å‰ç‰ˆæœ¬ <code>pestphp/pest-plugin-laravel@v1.0.0</code> å¯¹ phpunit çš„ç‰ˆæœ¬è¦æ±‚ <code>&quot;phpunit/phpunit&quot;: &quot;&gt;= 9.3.7 &lt;= 9.5.3&quot;</code>ï¼Œå¯ä»¥é€šè¿‡ <a href="https://github.com/pestphp/pest/blob/master/composer.json#L26" target="_blank" rel="noopener noreferrer">composer.json<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> æŸ¥çœ‹ã€‚ æ‰€ä»¥éœ€è¦ä¿®æ”¹æˆ‘ä»¬é¡¹ç›®çš„ phpunit ç‰ˆæœ¬ï¼Œä¿®æ”¹ <code>composer.json</code> ä¸­ <code>&quot;phpunit/phpunit&quot;: &quot;9.5.3&quot;</code>ï¼ŒæŒ‡å®š phpunit çš„ç‰ˆæœ¬ä¸ºï¼š<code>9.5.3</code>ã€‚</p></div><p>æ’ä»¶å®‰è£…å®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>php artisan pest:install
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>å°†åœ¨é¡¹ç›®ç›®å½• <code>tests</code> ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª<code>Pest.php</code>æ–‡ä»¶ã€‚</p><p>è¯¥ <code>Pest.php</code> æ–‡ä»¶è¢«<a href="https://getcomposer.org/doc/01-basic-usage.md#autoloading" target="_blank" rel="noopener noreferrer">è‡ªåŠ¨åŠ è½½<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> ã€‚Laravel é™„å¸¦äº†ä¸€äº›åŸºäº PHPUnit çš„ç¤ºä¾‹æµ‹è¯•æ–‡ä»¶ã€‚ è®©æ›´æ”¹è¿™äº›æµ‹è¯•ä»¥æ”¹ä¸ºä½¿ç”¨ Pest ã€‚è½¬åˆ° <code>tests/Future</code> ç›®å½•å¹¶æŸ¥çœ‹ <code>ExampleTest.php</code> æ–‡ä»¶ã€‚</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Tests<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Tests<span class="token punctuation">\</span>TestCase</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">ExampleTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * A basic test example.
     *
     * <span class="token keyword">@return</span> <span class="token class-name"><span class="token keyword">void</span></span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">testBasicTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$response</span><span class="token operator">-&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>è¦å°†æ­¤æµ‹è¯•è¿ç§»åˆ°ç›¸åº”çš„ Pest å®ç°ï¼Œæ›¿æ¢æ–‡ä»¶çš„å†…å®¹ï¼š</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;has welcome page&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å°†è¿™ä¸ª <code>ExampleTest</code> æ–‡ä»¶ä»å¤§çº¦20è¡Œä»£ç å‡å°‘åˆ°ä»…2è¡Œï¼ŒåŒæ—¶æµ‹è¯•äº†å®Œå…¨ç›¸åŒçš„äº‹ç‰©å¹¶äº§ç”Ÿäº†ç›¸åŒçš„ç»“æœã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒè®¿é—®<code>/</code> å¤„çš„æ ¹ URL ï¼Œå¹¶æ–­è¨€è¿”å›äº† HTTP çŠ¶æ€ç  200ã€‚</p><p>Pest æä¾›äº†ä¸¤ç§ç¼–å†™æµ‹è¯•çš„åŠŸèƒ½ <code>test()</code> å’Œ <code>it()</code>ã€‚</p><p>è¿™ä¸¤ä¸ªå‡½æ•°éƒ½å°†æµ‹è¯•æè¿°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶å°†åŒ…å«æµ‹è¯•æœŸæœ›çš„é—­åŒ…ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</p><p>åŒæ ·ï¼Œä¹Ÿå°† <code>ExampleTest.php</code> ä½äº <code>tests/Unit</code> ç›®å½•ä¸­çš„æ–‡ä»¶ä¹Ÿä½¿ç”¨Pestã€‚</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;basic&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œæµ‹è¯•å¥—ä»¶ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./vendor/bin/pest
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ‰€æœ‰æµ‹è¯•å‡åº”é€šè¿‡ã€‚</p><img src="/laravel-study/images/tests/unit-test-laravel-api-pest-framework/init-run-pest-test-pass.jpg" alt="Run pest test passed"><h2 id="åˆ›å»ºå¾…åŠäº‹é¡¹æ¨¡å‹-è¿ç§»å’Œæ§åˆ¶å™¨" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå¾…åŠäº‹é¡¹æ¨¡å‹-è¿ç§»å’Œæ§åˆ¶å™¨" aria-hidden="true">#</a> åˆ›å»ºå¾…åŠäº‹é¡¹æ¨¡å‹ï¼Œè¿ç§»å’Œæ§åˆ¶å™¨</h2><p>åº”ç”¨ç¨‹åºå°†æœ‰ä¸€ä¸ªåä¸ºçš„æ¨¡å‹ <code>Todo</code> ã€‚Laravel æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„å‘½ä»¤ï¼Œç”¨äºä¸€æ¬¡æ€§ç”Ÿæˆæ¨¡å‹ã€è¿ç§»æ–‡ä»¶ã€æ§åˆ¶å™¨å’Œæ¨¡å‹å·¥å‚ã€‚</p><p>ä¸ºæ­¤ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>php artisan make:model Todo -mcf
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>æ¥ä¸‹æ¥ï¼Œå°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°è¿ç§»æ–‡ä»¶ä¸­çš„æ–¹æ³•ä¸­ï¼š<code>database/migrations[TODAYSDATE]_create_todos_table.php</code></p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;todos&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">boolean</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;completed&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ¯ä¸ªå¾…åŠä»»åŠ¡å°†å…·æœ‰ä¸€ä¸ª <code>name</code> å±æ€§ä»¥åŠä¸€ä¸ªå¸ƒå°” <code>completed</code> å±æ€§ï¼Œå…¶é»˜è®¤å€¼ä¸º <code>false</code>ã€‚æ¥ä¸‹æ¥ï¼Œ<code>App/Models/Todo.php</code> ä½¿ç”¨ä»¥ä¸‹ä»£ç ç¼–è¾‘æ–‡ä»¶ï¼š</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Factories<span class="token punctuation">\</span>HasFactory</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">Todo</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">HasFactory</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;completed&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>å°†æ¨¡å‹çš„ <code>name</code> å’Œ <code>completed</code> å±æ€§åˆ†é…ä¸º <a href="https://laravel.com/docs/8.x/eloquent#mass-assignment" target="_blank" rel="noopener noreferrer">å…è®¸å¡«å……<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> ã€‚</p><h2 id="ä¿®æ”¹æ¨¡å‹å·¥å‚" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹æ¨¡å‹å·¥å‚" aria-hidden="true">#</a> ä¿®æ”¹æ¨¡å‹å·¥å‚</h2><p>ç¼–è¾‘ <code>database/factories/TodoFactory.php</code> æ–‡ä»¶çš„ <code>definition()</code> æ–¹æ³•ä»¥è¿”å›ç±»ä¼¼äºä»¥ä¸‹æ•°ç»„çš„æ•°ç»„ï¼š</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Database<span class="token punctuation">\</span>Factories</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Todo</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Factories<span class="token punctuation">\</span>Factory</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">TodoFactory</span> <span class="token keyword">extends</span> <span class="token class-name">Factory</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * The name of the factory&#39;s corresponding model.
     *
     * <span class="token keyword">@var</span> <span class="token class-name"><span class="token keyword">string</span></span>
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$model</span> <span class="token operator">=</span> <span class="token class-name static-context">Todo</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Define the model&#39;s default state.
     *
     * <span class="token keyword">@return</span> <span class="token class-name"><span class="token keyword">array</span></span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">definition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Deploy Twilio Verify to Live&#39;</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;completed&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span>
          <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>è¯¥ <code>definition</code> æ–¹æ³•è¿”å›ä½¿ç”¨å·¥å‚åˆ›å»ºæ¨¡å‹æ—¶åº”åº”ç”¨çš„é»˜è®¤å±æ€§å€¼é›†ã€‚</p><h2 id="é…ç½®æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ•°æ®åº“" aria-hidden="true">#</a> é…ç½®æ•°æ®åº“</h2><p>ä½¿ç”¨å†…å­˜ä¸­çš„ <code>SQLite</code> æ•°æ®åº“è¿›è¡Œæµ‹è¯•ã€‚Laravel å·²ç»æä¾›äº†ä½¿ç”¨ SQLite æ•°æ®åº“è¿›è¡Œæµ‹è¯•çš„æ”¯æŒã€‚</p><p>ä½äºé¡¹ç›®ç›®å½•æ ¹ç›®å½•ä¸‹çš„ <code>phpunit.xml</code> æ–‡ä»¶ï¼Œå¹¶å–æ¶ˆæ³¨é‡Šä»¥ä¸‹ä»£ç è¡Œï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phpunit</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>noNamespaceSchemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./vendor/phpunit/phpunit/phpunit.xsd<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">bootstrap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vendor/autoload.php<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">colors</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>testsuites</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>testsuite</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Unit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Test.php<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./tests/Unit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>testsuite</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>testsuite</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Feature<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Test.php<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./tests/Feature<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>testsuite</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>testsuites</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>coverage</span> <span class="token attr-name">processUncoveredFiles</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.php<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./app<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>coverage</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>php</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>APP_ENV<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testing<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BCRYPT_ROUNDS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CACHE_DRIVER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DB_CONNECTION<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlite<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DB_DATABASE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>:memory:<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MAIL_MAILER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>QUEUE_CONNECTION<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sync<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SESSION_DRIVER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TELESCOPE_ENABLED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>php</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phpunit</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="ç¼–å†™æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™æµ‹è¯•" aria-hidden="true">#</a> ç¼–å†™æµ‹è¯•</h2><p>æ—¢ç„¶å·²ç»å®Œæˆäº†æ‰€æœ‰å¿…è¦çš„å‰ç½®è®¾ç½®å’Œé…ç½®ï¼Œå°±å¯ä»¥å¼€å§‹ç¼–å†™æµ‹è¯•äº†ã€‚</p><p>è¿™äº›æµ‹è¯•å¿…é¡»å…·æœ‰æ­£å¸¸è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œå¹¶å°†æä¾›ç›¸åº”çš„å®ç°ä»¥ç¡®ä¿æ‰€æœ‰æµ‹è¯•å‡é€šè¿‡ã€‚</p><p>è¿è¡Œä»¥ä¸‹ Pest å‘½ä»¤ä»¥åˆ›å»ºå•å…ƒæµ‹è¯•æ–‡ä»¶ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>php artisan pest:test TodoTest --unit
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>è¿™å°† <code>TodoTest.php</code> åœ¨ <code>tests/Unit</code> ç›®å½•ä¸­åˆ›å»ºã€‚ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢æ–‡ä»¶çš„ä»£ç ï¼š</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Todo</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Testing<span class="token punctuation">\</span>RefreshDatabase</span><span class="token punctuation">;</span>

<span class="token function">uses</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified static-context">Tests<span class="token punctuation">\</span>TestCase</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name static-context">RefreshDatabase</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;does not create a to-do without a name field&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">postJson</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/api/todos&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$response</span><span class="token operator">-&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">422</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;can create a to-do&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$attributes</span> <span class="token operator">=</span> <span class="token class-name static-context">Todo</span><span class="token operator">::</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">postJson</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/api/todos&#39;</span><span class="token punctuation">,</span> <span class="token variable">$attributes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$response</span><span class="token operator">-&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">assertJson</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;To-do has been created&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertDatabaseHas</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;todos&#39;</span><span class="token punctuation">,</span> <span class="token variable">$attributes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;can fetch a to-do&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$todo</span> <span class="token operator">=</span> <span class="token class-name static-context">Todo</span><span class="token operator">::</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getJson</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/api/todos/<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Retrieved To-do&#39;</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">&#39;todo&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;id&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;completed&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token property">completed</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token variable">$response</span><span class="token operator">-&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">assertJson</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;can update a to-do&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$todo</span> <span class="token operator">=</span> <span class="token class-name static-context">Todo</span><span class="token operator">::</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$updatedTodo</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Updated To-do&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">putJson</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/api/todos/<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">,</span> <span class="token variable">$updatedTodo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$response</span><span class="token operator">-&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">assertJson</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;To-do has been updated&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertDatabaseHas</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;todos&#39;</span><span class="token punctuation">,</span> <span class="token variable">$updatedTodo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;can delete a to-do&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$todo</span> <span class="token operator">=</span> <span class="token class-name static-context">Todo</span><span class="token operator">::</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">deleteJson</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/api/todos/<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$response</span><span class="token operator">-&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">assertJson</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;To-do has been deleted&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertCount</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name static-context">Todo</span><span class="token operator">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>åœ¨æ–‡ä»¶çš„é¡¶éƒ¨ï¼Œè¯¥ <code>uses()</code> æ–¹æ³•å°† <code>TestCase</code> ç±»å’Œ <code>RefreshDatabase</code> Trait ç»‘å®šåˆ°å½“å‰çš„æµ‹è¯•æ–‡ä»¶ã€‚</p><p>è¯¥åŸºç±» <code>TestCase</code> ç”± Laravel æä¾›ï¼Œå¹¶æä¾›äº†åœ¨æµ‹è¯•æ—¶ä½¿ç”¨è¯¥æ¡†æ¶çš„è¾…åŠ©æ–¹æ³•ã€‚</p><p>è¯¥ <code>RefreshDatabase</code> ç‰¹å¾è´Ÿè´£åœ¨æ¯æ¬¡æµ‹è¯•åè¿ç§»å’Œé‡ç½®æ•°æ®åº“ï¼Œä»¥ä½¿å…ˆå‰æµ‹è¯•çš„æ•°æ®ä¸ä¼šå¹²æ‰°åç»­æµ‹è¯•ã€‚</p><p>ç°åœ¨ï¼Œå›é¡¾ä¸€ä¸‹æ¯ä¸ªæµ‹è¯•çš„åŠŸèƒ½ï¼š</p><blockquote><p>Laravel æä¾›äº†å¤šä¸ªå¸®åŠ©ç¨‹åºæ¥æµ‹è¯•JSON APIåŠå…¶å“åº”ã€‚</p></blockquote><blockquote><p><strong>it(&#39;does not create a to-do without a name field&#39;)</strong></p><p>åˆ©ç”¨ <code>postJson</code> æ–¹æ³•å‘ <code>api/todos</code> åœ°å€å‘é€ POST è¯·æ±‚ï¼Œå¹¶ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„å‚æ•°ã€‚æ¥ä¸‹æ¥æ–­è¨€ï¼Œ<code>assertStatus()</code> è¿”å›å“åº”ä¸­çš„æ–¹æ³•ç¡®ä¿åº”è¿”å› HTTP çŠ¶æ€ä»£ç  422 ã€‚ä½œç”¨æ˜¯ç¡®ä¿åç§°å­—æ®µå¿…é¡»æä¾›ã€‚</p></blockquote><blockquote><p><strong>it(&#39;can create a to-do&#39;)</strong></p><p>ä½¿ç”¨ <code>POST</code> æ–¹å¼åœ¨ <code>api/todos</code> åœ°å€å‘å‡ºè¯·æ±‚æ—¶åˆ›å»ºå¾…åŠäº‹é¡¹ã€‚æ–­è¨€å·²è¿”å› HTTP çŠ¶æ€ä»£ç  201 ï¼Œå¹¶ä¸”è¯¥æ•°æ®åº“å®é™…ä¸ŠåŒ…å«ä½¿ç”¨è¯¥ <code>assertDatabase()</code> æ–¹æ³•çš„å¾…åŠäº‹é¡¹ã€‚</p></blockquote><blockquote><p><strong>it(&#39;can fetch a to-do&#39;)</strong></p><p>ä½¿ç”¨ <code>TodoFactory</code> ä¸Šçš„ <code>create()</code> æ–¹æ³•ï¼Œå¯ä»¥åˆ›å»ºå¾…åŠä»»åŠ¡å¹¶å°†å…¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚æ¥ä¸‹æ¥æ–­è¨€è¿”å›çš„çŠ¶æ€ç ä¸º 200 ã€‚è¯¥ <code>assertJson()</code> æ–¹æ³•å°†å“åº”è½¬æ¢ä¸ºæ•°ç»„ï¼Œå¹¶éªŒè¯ç»™å®šæ•°ç»„æ˜¯å¦å­˜åœ¨äºåº”ç”¨ç¨‹åºå°†è¿”å›çš„ JSON å“åº”ä¸­ã€‚æ­¤æµ‹è¯•æ£€æŸ¥æ˜¯å¦å¯ä»¥ä½¿ç”¨ ID æå–ç‰¹å®šçš„å¾…åŠäº‹é¡¹ã€‚</p></blockquote><blockquote><p><strong>it(&#39;can update a to-do&#39;)</strong></p><p>æ­¤æµ‹è¯•ç¡®ä¿å¯ä»¥æ›´æ–°å¾…åŠäº‹é¡¹ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ•°æ®åº“ä¸­æ‰¾åˆ°æ›´æ–°åçš„ä»»åŠ¡ã€‚</p></blockquote><blockquote><p><strong>it(&#39;can delete a to-do&#39;)</strong></p><p>æ­¤æµ‹è¯•ç¡®ä¿å¯ä»¥åˆ é™¤å¾…åŠäº‹é¡¹ï¼Œå¹¶éªŒè¯æ•°æ®åº“ä¸­åŒ…å«çš„ä»»åŠ¡æ€»æ•°ä¸ºé›¶ã€‚</p></blockquote><p>è¦è¿è¡Œæµ‹è¯•ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./vendor/bin/pest --filter TodoTest
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ç”±äºå½“å‰å°šæœªå®ç°ä»»ä½•åŠŸèƒ½ï¼Œå› æ­¤æµ‹è¯•åº”è¯¥ä¼šå¤±è´¥ã€‚</p><img src="/laravel-study/images/tests/unit-test-laravel-api-pest-framework/run-pest-test-failed.jpg"><h2 id="ç”Ÿæˆå¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åº" tabindex="-1"><a class="header-anchor" href="#ç”Ÿæˆå¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åº" aria-hidden="true">#</a> ç”Ÿæˆå¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åº</h2><p>åˆ°ç›®å‰ä¸ºæ­¢å·²ç»ç¼–å†™çš„æµ‹è¯•çš„ç›¸åº”å®ç°ã€‚è½¬åˆ° <code>app/Http/Controllers</code> æ§åˆ¶å™¨ç›®å½•ä¸­çš„ <code>TodoController.php</code> æ–‡ä»¶ï¼Œç„¶åå°†æ–‡ä»¶ä»£ç æ›¿æ¢ä¸ºä»¥ä¸‹ä»£ç ï¼š</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Todo</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">TodoController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">create</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">rules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$todo</span> <span class="token operator">=</span> <span class="token class-name static-context">Todo</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;To-do has been created&#39;</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;todo&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">mapTodoResponse</span><span class="token punctuation">(</span><span class="token variable">$todo</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token number">201</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">show</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Todo</span> <span class="token variable">$todo</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Retrieved To-do&#39;</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;todo&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">mapTodoResponse</span><span class="token punctuation">(</span><span class="token variable">$todo</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">update</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Todo</span> <span class="token variable">$todo</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">rules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;To-do has been updated&#39;</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;todo&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">mapTodoResponse</span><span class="token punctuation">(</span><span class="token variable">$todo</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">delete</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Todo</span> <span class="token variable">$todo</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;To-do has been deleted&#39;</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">rules</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;required|string|min:4&#39;</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">mapTodoResponse</span><span class="token punctuation">(</span><span class="token variable">$todo</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;id&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;completed&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$todo</span><span class="token operator">-&gt;</span><span class="token property">completed</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><blockquote><ul><li><code>create()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å¾…åŠä»»åŠ¡ã€‚</li><li><code>show()</code> æ–¹æ³•æ ¹æ®å…¶IDè¿”å›ç»™å®šçš„ä»»åŠ¡ã€‚</li><li><code>update()</code> æ–¹æ³•å°†æ›´æ–°å¾…åŠä»»åŠ¡ã€‚</li><li><code>delete()</code> æ–¹æ³•åˆ é™¤ç»™å®šçš„å¾…åŠä»»åŠ¡ã€‚</li></ul></blockquote><p>æ¥ä¸‹æ¥ï¼Œå°†ä»¥ä¸‹è·¯ç”±æ·»åŠ åˆ° <code>routes/api.php</code> æ–‡ä»¶ï¼š</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Route</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>TodoController</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/todos/{todo}&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">TodoController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;show&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/todos&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">TodoController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;create&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/todos/{todo}&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">TodoController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;update&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/todos/{todo}&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">TodoController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;delete&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ç°åœ¨å·²ç»ä¸ºæµ‹è¯•æä¾›äº†æ‰€æœ‰ç›¸åº”çš„å®ç°ï¼Œå¯ä»¥è¿”å›è¿è¡Œæµ‹è¯•ï¼Œå®ƒä»¬ç°åœ¨éƒ½åº”è¯¥é€šè¿‡äº†ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å†æ¬¡è¿è¡Œæµ‹è¯•ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./vendor/bin/pest --filter TodoTest
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><img src="/laravel-study/images/tests/unit-test-laravel-api-pest-framework/run-pest-test-pass.jpg" alt="Run pest test passed"><h2 id="ç»“è®º" tabindex="-1"><a class="header-anchor" href="#ç»“è®º" aria-hidden="true">#</a> ç»“è®º</h2><p>åœ¨æœ¬æ–‡ä¸­ï¼Œå·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨ Pest æµ‹è¯•æ¡†æ¶ä¸º Laravel åº”ç”¨ç¨‹åºç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p><p>æœ¬æ•™ç¨‹å¯ä»¥ä½œä¸º Pest å…¥é—¨ä»¥åŠå¯¹ Laravel åº”ç”¨ç¨‹åºè¿›è¡Œå•å…ƒæµ‹è¯•çš„ç†æƒ³æŒ‡å—ã€‚</p><p>åŒ…å«æ­¤é¡¹ç›®å®Œæ•´ä»£ç  <a href="https://github.com/curder/laravel-pest-todo-test-demo" target="_blank" rel="noopener noreferrer">GitHub ä»“åº“åœ°å€<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> ã€‚</p><h2 id="åŸæ–‡é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#åŸæ–‡é“¾æ¥" aria-hidden="true">#</a> åŸæ–‡é“¾æ¥</h2><ul><li><a href="https://www.twilio.com/blog/unit-test-laravel-api-pest-framework" target="_blank" rel="noopener noreferrer">How to Unit Test a Laravel API with the Pest Framework<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: q.curder@gmail.com">curder</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/laravel-study/assets/app.ec5e6153.js" defer></script>
  </body>
</html>
