<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.32">
    <title>Model æ¨¡å‹ | Laravel å­¦ä¹ è®°å½•</title><meta name="description" content="Laravelå­¦ä¹ ç‚¹æ»´">
    <link rel="modulepreload" href="/laravel-study/assets/app.258ae537.js"><link rel="modulepreload" href="/laravel-study/assets/model.html.d1c7e9c1.js"><link rel="modulepreload" href="/laravel-study/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/laravel-study/assets/model.html.7d2f7aac.js">
    <link rel="stylesheet" href="/laravel-study/assets/style.45c5dbd6.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/laravel-study/" class=""><img class="logo" src="/laravel-study/images/laravel-logo.min.svg" alt="Laravel å­¦ä¹ è®°å½•"><span class="site-name can-hide">Laravel å­¦ä¹ è®°å½•</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/laravel-study/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="é›†åˆ"><span class="title">é›†åˆ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="é›†åˆ"><span class="title">é›†åˆ</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/laravel-study/collections/" class="" aria-label="åŸºç¡€"><!--[--><!--]--> åŸºç¡€ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/collections/demo/" class="" aria-label="å®é™…åº”ç”¨"><!--[--><!--]--> å®é™…åº”ç”¨ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ¨¡å‹"><span class="title">æ¨¡å‹</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ¨¡å‹"><span class="title">æ¨¡å‹</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/laravel-study/model/" class="" aria-label="Laravelæ¨¡å‹"><!--[--><!--]--> Laravelæ¨¡å‹ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/model/related-relationships/" class="" aria-label="æ¨¡å‹å…³è”å…³ç³»"><!--[--><!--]--> æ¨¡å‹å…³è”å…³ç³» <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/laravel-study/tests/" class="" aria-label="æµ‹è¯•"><!--[--><!--]--> æµ‹è¯• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/partials/" class="router-link-active" aria-label="ä»£ç ç‰‡æ®µ"><!--[--><!--]--> ä»£ç ç‰‡æ®µ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/others/" class="" aria-label="å…¶å®ƒ"><!--[--><!--]--> å…¶å®ƒ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ“–ğŸ“š"><span class="title">ğŸ“–ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ“–ğŸ“š"><span class="title">ğŸ“–ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://curder.github.io/blog/" rel="noopener noreferrer" target="_blank" aria-label="Bolg"><!--[--><!--]--> Bolg <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://curder.github.io/setup-mac-for-developer/" rel="noopener noreferrer" target="_blank" aria-label="Setup mac for developer"><!--[--><!--]--> Setup mac for developer <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/laravel-study/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="é›†åˆ"><span class="title">é›†åˆ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="é›†åˆ"><span class="title">é›†åˆ</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/laravel-study/collections/" class="" aria-label="åŸºç¡€"><!--[--><!--]--> åŸºç¡€ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/collections/demo/" class="" aria-label="å®é™…åº”ç”¨"><!--[--><!--]--> å®é™…åº”ç”¨ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ¨¡å‹"><span class="title">æ¨¡å‹</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ¨¡å‹"><span class="title">æ¨¡å‹</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/laravel-study/model/" class="" aria-label="Laravelæ¨¡å‹"><!--[--><!--]--> Laravelæ¨¡å‹ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/model/related-relationships/" class="" aria-label="æ¨¡å‹å…³è”å…³ç³»"><!--[--><!--]--> æ¨¡å‹å…³è”å…³ç³» <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="å…¶å®ƒ"><span class="title">å…¶å®ƒ</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/laravel-study/tests/" class="" aria-label="æµ‹è¯•"><!--[--><!--]--> æµ‹è¯• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/partials/" class="router-link-active" aria-label="ä»£ç ç‰‡æ®µ"><!--[--><!--]--> ä»£ç ç‰‡æ®µ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/laravel-study/others/" class="" aria-label="å…¶å®ƒ"><!--[--><!--]--> å…¶å®ƒ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ“–ğŸ“š"><span class="title">ğŸ“–ğŸ“š</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ“–ğŸ“š"><span class="title">ğŸ“–ğŸ“š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://curder.github.io/blog/" rel="noopener noreferrer" target="_blank" aria-label="Bolg"><!--[--><!--]--> Bolg <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://curder.github.io/setup-mac-for-developer/" rel="noopener noreferrer" target="_blank" aria-label="Setup mac for developer"><!--[--><!--]--> Setup mac for developer <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p class="sidebar-item sidebar-heading active">ä»£ç ç‰‡æ®µ <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/laravel-study/partials/blade.html" class="sidebar-item" aria-label="Blade æ¨¡ç‰ˆ"><!--[--><!--]--> Blade æ¨¡ç‰ˆ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/partials/model.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Model æ¨¡å‹"><!--[--><!--]--> Model æ¨¡å‹ <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/laravel-study/partials/model.html#åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ–°å¢-wasrecentlycreated" class="router-link-active router-link-exact-active sidebar-item" aria-label="åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ–°å¢ wasRecentlyCreated"><!--[--><!--]--> åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ–°å¢ wasRecentlyCreated <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/partials/model.html#é‡ç”¨æˆ–å…‹éš†æŸ¥è¯¢" class="router-link-active router-link-exact-active sidebar-item" aria-label="é‡ç”¨æˆ–å…‹éš†æŸ¥è¯¢"><!--[--><!--]--> é‡ç”¨æˆ–å…‹éš†æŸ¥è¯¢ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/partials/model.html#æ¨¡å‹çš„æ—¶é—´æŸ¥è¯¢æ–¹æ³•" class="router-link-active router-link-exact-active sidebar-item" aria-label="æ¨¡å‹çš„æ—¶é—´æŸ¥è¯¢æ–¹æ³•"><!--[--><!--]--> æ¨¡å‹çš„æ—¶é—´æŸ¥è¯¢æ–¹æ³• <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/partials/model.html#ä¿å­˜æ¨¡å‹åŠå…¶æ‰€æœ‰å…³ç³»" class="router-link-active router-link-exact-active sidebar-item" aria-label="ä¿å­˜æ¨¡å‹åŠå…¶æ‰€æœ‰å…³ç³»"><!--[--><!--]--> ä¿å­˜æ¨¡å‹åŠå…¶æ‰€æœ‰å…³ç³» <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/laravel-study/partials/model.html#è·å–æŸ¥è¯¢æ—¥å¿—" class="router-link-active router-link-exact-active sidebar-item" aria-label="è·å–æŸ¥è¯¢æ—¥å¿—"><!--[--><!--]--> è·å–æŸ¥è¯¢æ—¥å¿— <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/laravel-study/partials/routing.html" class="sidebar-item" aria-label="Routing è·¯ç”±"><!--[--><!--]--> Routing è·¯ç”± <!--[--><!--]--></a><!----></li><li><a href="/laravel-study/partials/testing.html" class="sidebar-item" aria-label="Testing æµ‹è¯•"><!--[--><!--]--> Testing æµ‹è¯• <!--[--><!--]--></a><!----></li><li><a href="/laravel-study/partials/urls.html" class="sidebar-item" aria-label="URL ç”Ÿæˆ"><!--[--><!--]--> URL ç”Ÿæˆ <!--[--><!--]--></a><!----></li><li><a href="/laravel-study/partials/validation.html" class="sidebar-item" aria-label="Validation éªŒè¯"><!--[--><!--]--> Validation éªŒè¯ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="model-æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#model-æ¨¡å‹" aria-hidden="true">#</a> Model æ¨¡å‹</h1><h2 id="åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ–°å¢-wasrecentlycreated" tabindex="-1"><a class="header-anchor" href="#åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ–°å¢-wasrecentlycreated" aria-hidden="true">#</a> åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ–°å¢ <code>wasRecentlyCreated</code></h2><p>åœ¨ Laravel ä¸­ï¼Œæœ‰æ—¶å¯èƒ½éœ€è¦æ£€æŸ¥æ¨¡å‹æ˜¯ä»æ•°æ®åº“ä¸­è·å–çš„è¿˜æ˜¯åˆšåˆšåœ¨å½“å‰è¯·æ±‚ç”Ÿå‘½å‘¨æœŸä¸­åˆ›å»ºçš„â€”â€”æ¯”å¦‚ä½¿ç”¨ <code>firstOrCreate()</code> æ—¶ã€‚</p><p>ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥åœ¨æ¨¡å‹ä¸Šä½¿ç”¨ <code>-&gt;wasRecentlyCreated</code> å­—æ®µã€‚</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">createOrUpdate</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;email&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;email&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">wasRecentlyCreated</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç”¨æˆ·æ–°å¢é€»è¾‘ä»£ç </span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç”¨æˆ·å·²å­˜åœ¨å¹¶ä»æ•°æ®åº“ä¸­è·å–</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="é‡ç”¨æˆ–å…‹éš†æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#é‡ç”¨æˆ–å…‹éš†æŸ¥è¯¢" aria-hidden="true">#</a> é‡ç”¨æˆ–å…‹éš†æŸ¥è¯¢</h2><p>é€šå¸¸ï¼Œéœ€è¦ä»è¿‡æ»¤åçš„æŸ¥è¯¢å†è¿›è¡Œå¤šæ¬¡æŸ¥è¯¢ã€‚å¤§å¤šæ•°æ—¶å€™ä½¿ç”¨ <code>query()</code> æ–¹æ³•ï¼Œç¼–å†™ä¸€ä¸ªæŸ¥è¯¢æ¥è·å–åˆ›å»ºçš„æ´»è·ƒå’Œéæ´»è·ƒäº§å“ã€‚</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$query</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$today</span> <span class="token operator">=</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">q_date</span> <span class="token operator">??</span> <span class="token function">today</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$today</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token variable">$today</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$active_products</span> <span class="token operator">=</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;status&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸ä¼šä¿®æ”¹ $query å˜é‡</span>
<span class="token variable">$inactive_products</span> <span class="token operator">=</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;status&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä» $query ä¸­è·å–æ­£ç¡®çš„äº§å“</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="æ¨¡å‹çš„æ—¶é—´æŸ¥è¯¢æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#æ¨¡å‹çš„æ—¶é—´æŸ¥è¯¢æ–¹æ³•" aria-hidden="true">#</a> æ¨¡å‹çš„æ—¶é—´æŸ¥è¯¢æ–¹æ³•</h2><p>Laravel æä¾›äº†ä¸€äº›æ—¶é—´æŸ¥è¯¢æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š<code>whereDate</code>ã€<code>whereMonth</code>ã€<code>whereDay</code>ã€<code>whereYear</code>ã€<code>whereTime</code>ã€‚</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$products</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">whereDate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;2018-01-31&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$products</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">whereMonth</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;12&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$products</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">whereDay</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;31&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$products</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">whereYear</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Y&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$products</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">whereTime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;=&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;14:13:58&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="ä¿å­˜æ¨¡å‹åŠå…¶æ‰€æœ‰å…³ç³»" tabindex="-1"><a class="header-anchor" href="#ä¿å­˜æ¨¡å‹åŠå…¶æ‰€æœ‰å…³ç³»" aria-hidden="true">#</a> ä¿å­˜æ¨¡å‹åŠå…¶æ‰€æœ‰å…³ç³»</h2><p>ä½¿ç”¨ <code>push()</code> æ–¹æ³•æ›´æ–°æ•°æ®åº“ä¸­çš„ä¸»æ¨¡å‹å’Œç›¸å…³æ¨¡å‹ã€‚</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token doc-comment comment">/**
 * ä½¿ç”¨ `push()` å°†ä¸»æ¨¡å‹ä¸ä»»ä½•æ›´æ”¹å…³ç³»ä¸€èµ·ä¿å­˜
 */</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">phone</span><span class="token punctuation">(</span> <span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">has0ne</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;App\Models\Phone&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token operator">::</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;John&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">phone</span><span class="token operator">-&gt;</span><span class="token property">number</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;1234567890&#39;</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™ä¼šæ›´æ–°æ•°æ®åº“ä¸­çš„ç”¨æˆ·è®°å½•å’Œç›¸å…³çš„ç”¨æˆ·ç”µè¯å·ç è®°å½•</span>
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line">Â </div></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="è·å–æŸ¥è¯¢æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#è·å–æŸ¥è¯¢æ—¥å¿—" aria-hidden="true">#</a> è·å–æŸ¥è¯¢æ—¥å¿—</h2><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­è®°å½•æ‰€æœ‰æ•°æ®åº“æŸ¥è¯¢ï¼Œè¯·å°†æ­¤ä»£ç æ®µæ·»åŠ åˆ°çš„ <code>AppServiceProvider.php</code>ï¼š</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name static-context">App</span><span class="token operator">::</span><span class="token function">environment</span> <span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;local&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">logger</span><span class="token punctuation">(</span><span class="token class-name static-context">Str</span><span class="token operator">::</span><span class="token function">replaceArray</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;?&#39;</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token property">bindings</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token property">sql</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: q.curder@gmail.com">curder</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/laravel-study/partials/blade.html" class="" aria-label="Blade æ¨¡ç‰ˆ"><!--[--><!--]--> Blade æ¨¡ç‰ˆ <!--[--><!--]--></a></span><span class="next"><a href="/laravel-study/partials/routing.html" class="" aria-label="Routing è·¯ç”±"><!--[--><!--]--> Routing è·¯ç”± <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/laravel-study/assets/app.258ae537.js" defer></script>
  </body>
</html>
